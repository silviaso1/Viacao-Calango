<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento</title>
    <link rel="stylesheet" href="./css/pagamento.css">
    <script>
      document.addEventListener('DOMContentLoaded', () => {
    const journeyDetails = JSON.parse(localStorage.getItem('selectedJourney'));
    const selectedSeats = JSON.parse(localStorage.getItem('selectedSeats')) || [];

    if (journeyDetails) {
        document.querySelector('.informacoes-viagem').innerHTML = `
            <p><strong>${journeyDetails.tipo}</strong></p>
            <p>${journeyDetails.horarioSaida} <span>&rarr;</span> ${journeyDetails.horarioChegada}</p>
            <p>${journeyDetails.origem} <br> ${journeyDetails.destino}</p>
            <p><strong>Data de Ida:</strong> ${journeyDetails.dataIda}</p>
            ${journeyDetails.dataVolta ? `<p><strong>Data de Volta:</strong> ${journeyDetails.dataVolta}</p>` : ''}
            <p>${journeyDetails.tempoViagem} de viagem</p>
            <p><strong>Assentos Selecionados:</strong> ${selectedSeats.join(', ')}</p>
        `;
        document.querySelector('.resumo span').textContent = `R$ ${journeyDetails.preco}`;
        document.querySelector('.total strong').textContent = `R$ ${journeyDetails.preco}`;
    }
});

function confirmarCompra(event) {
    event.preventDefault();

    const journeyDetails = JSON.parse(localStorage.getItem('selectedJourney'));
    const selectedSeats = JSON.parse(localStorage.getItem('selectedSeats')) || [];
    const nome = document.querySelector('input[name="nome"]').value;
    const documento = document.querySelector('input[name="documento"]').value;

    if (journeyDetails && nome && documento) {
        const novaPassagem = {
            ...journeyDetails,
            nome,
            documento,
            assentos: selectedSeats.join(', ')
        };

        const passagensEmitidas = JSON.parse(localStorage.getItem('passagensEmitidas')) || [];
        passagensEmitidas.push(novaPassagem);
        localStorage.setItem('passagensEmitidas', JSON.stringify(passagensEmitidas));

        window.location.href = "../Emissao/emitido.html";
    } else {
        alert("Por favor, preencha todos os dados.");
    }
}




        
    </script>
</head>
<body>
    <header>
        <a href="../portal/portal.html">
            <img src="../exports/logo.png" alt="Logo Via√ß√£o Galango">
        </a>
        <button><a href="../../Cadastro e login/login/login.html">Entrar</a></button>
    </header>
    
    <div class="container">
        <main>
            <div class="dados">
                <section class="dados-passageiro">
                    <h2>Dados do passageiro</h2>
                    <div class="informacoes-viagem">
                        <!-- Dados da viagem e assentos selecionados ser√£o atualizados aqui -->
                    </div>
                    <form id="form-pagamento">
                        <input type="text" name="nome" placeholder="Nome completo" required>
                        <input type="text" name="documento" placeholder="N√∫mero do documento" required>
                    </form>
                </section>
    
                <section class="resumo">
                    <h2>Resumo</h2>
                    <p>Valor das passagens <span>R$ 100,00</span></p>
                    <p>Impostos e taxas <span>R$ 0,00</span></p>
                    <p>Seguro <span>R$ 0,00</span></p>
                </section>
    
                <section class="pagamento">
                    <h2>Escolha a forma de pagamento</h2>
                    <div class="opcoes-pagamento">
                        <button class="cartao" onclick="mostrarCampos('cartao')">Cart√£o de cr√©dito</button>
                        <button class="pix" onclick="mostrarCampos('pix')">Pix</button>
                        <button class="boleto" onclick="mostrarCampos('boleto')">Boleto</button>
                    </div>
                    
                    <div id="form-cartao" class="dados-cartao">
                        <input type="text" placeholder="N√∫mero do cart√£o">
                        <input type="text" placeholder="Nome do titular">
                        <input type="text" placeholder="Validade">
                        <input type="text" placeholder="CVV">
                        <input type="text" placeholder="CPF">
                        <input type="date" placeholder="Data de nascimento">
                        <input type="email" placeholder="E-mail">
                      
                    </div>

                    <div id="form-pix" class="dados-pix" style="display: none;">
                        <p>Escolha um banco para realizar o pagamento via Pix.</p>
                        <input type="text" placeholder="Banco">
                        <input type="text" placeholder="Chave Pix">
                 
                    </div>

                    <div id="form-boleto" class="dados-boleto" style="display: none;">
                        <p>Gerar boleto banc√°rio para pagamento.</p>
                        <input type="text" placeholder="CPF">
                        <input type="email" placeholder="E-mail">
                        
                    </div>
                </section>
    
                <section class="informacoes-adicionais">
                    <div class="pagamento-seguro">
                        <img src="./img/ü¶Ü icon _wallet_.png" alt="Pagamento Seguro">
                        <p>Pagamento seguro <br> Utilizamos os m√©todos eficazes e seguros para manter a seguran√ßa dos seus dados.</p>
                    </div>
                    <div class="cancelamento">
                        <img src="./img/ü¶Ü icon _cancel_.png" alt="Cancelamento">
                        <p>Cancele quando quiser <br> Mudou de ideia? Cancele sua viagem em at√© 30 dias.</p>
                    </div>
                </section>
            </div>
        </main>
        <footer>
            <button class="confirmar" onclick="confirmarCompra(event)">Confirmar</button>
            <input type="checkbox">
            <label>Ao confirmar a compra eu concordo com os <a href="#">termos de uso</a> e <a href="#">pol√≠ticas de privacidade</a></label>
        </footer>
    </div>

    <script src="./js/pagamento.js"></script>
</body>
</html>
